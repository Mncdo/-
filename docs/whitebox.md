# 白盒评分

本课程的代码会进行白盒评分，通常会从以下几个方面进行打分：

1. 代码：简洁、注释、空格和命名
2. Git：提交历史、提交信息
3. Honor Code: 记录同学参考网上的文章或者代码、与同学的交流情况

通常而言，白盒分数占作业分数的 20%，其中代码与 Git 各占白盒分数的一半。Honor Code 则为必选项。

对于不符合下面要求的代码，助教将酌情进行扣分。每个作业的评阅尺度可能不同。

## 代码

=== 简洁

    保证代码的简洁：

    * 有整齐的缩进，建议用空格缩进而非 tab，两个空格或者四个空格作为一级缩进都可以；
    * 每一行不要有太多字符，例如不超过 80 / 100 个字符；
    * 减少硬编码和魔发数字（magic number），例如代码中多次出现 3.14 的时候，应该定义 `pi = 3.14`，然后后面都用 `pi` 来指代。

=== 注释

    在代码中编写适当的注释：

    * 在比较复杂的代码块前，描述代码的功能；
    * 过于简单的代码，一般不写注释；
    * 函数要编写注释，包括其功能，参数和输出；
    * 建议用英文，中文也可以，但是注意要用 UTF-8 编码。

=== 空白

    代码中应该有适当的空格和空行：

    * 函数中，实现不同功能的代码间需要添加空行；
    * 操作符前后应该有空格，例如 `c = a + b`；
    * 保持前后一致的风格。

=== 命名

    变量的命名，应该符合一定的规范：

    * 根据语言和类型的不同，固定一种命名规范；
    * 尽量用英文，而不是中文拼音首字母；
    * 命名与上下文要相关；
    * 不用类似 `a, b, c, d` 这种命名方式。

=== 工具

    为了实现上面的部分要求，可以采用一些自动化工具：

    * 编辑器自带的格式化功能
    * Python 代码：可以用 `autopep8` 和 `black`
    * Bash 代码：可以用 `shfmt`

## Git

=== 提交历史

    * 每个提交都应该有一定的意义，例如实现了新功能，修复了一个问题，定义了新的函数
    * 比较复杂的程序，要边开发边提交，而不是写完了再一次性提交

=== 提交信息

    * 简单明了地描述这个提交的内容
    * 建议用英文写，用中文写也可以
    * 不要编写的过于详细或过于简略
    * 可以采用一些格式，例如 [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/#examples)
    * 不掺杂个人情绪
    * 可以添加一些 Emoji

## 抄袭与重重

!!! fail "禁止抄袭"

    你提交到 GitLab 上的 **所有代码** 将被作为查重的依据，进行横向和纵向的交叉查重，代码库包括了本课程创始以来的所有代码。恶意篡改 Git Commit 时间也视为作弊（比如在 DDL 之后把时间调到 DDL 之前）。一旦确认抄袭，你将会受到严肃的处理，包括且不限于：
    
    * 失去该作业部分或所有的分数，或被倒扣分数
    * 课程成绩记为不及格
    * 上报给所在院系和相应教学管理部门

    请三思而后行！

!!! danger "相关规定"

    根据《清华大学学生纪律处分管理规定实施细则》第六章（学术不端、违反学习纪律的行为与处分）：

    * 第二十一条 有下列违反课程学习纪律情形之一的，给予警告以上、留校察看以下处分：
        * （一）课程作业抄袭严重的；
        * （二）实验报告抄袭严重或者篡改实验数据的；
        * （三）期中、期末课程论文抄袭严重的；
        * （四）在课程学习过程中严重弄虚作假的其他情形

!!! example "典型案例"

    1. 一位同学在做实验的时候，自己编写的代码没有通过所有的测试，在 DDL 后将往年同学公布在 GitHub 的代码原样复制到自己的仓库中提交。
    2. DDL 前，A 同学给 B 同学讲解了代码，但 B 同学依然没有搞懂，就从 A 同学处要了一份代码，结果 B 同学直接把 A 同学的代码提交上去。
    3. A 同学对着代码，给同学讲解了作业，并进行了录像，之后 B 同学对着录像把 A 同学的代码摘抄下来提交。

    教务处公告称：自动化系某2021级本科生，在2021-2022学年秋季学期某门课程作业中抄袭其他同学的源代码文件。根据《清华大学学生纪律处分管理规定实施细则》（清校发〔2019〕14号）第二十一条规定，决定给予其警告处分。

### 常见问题

!!! question "到底怎么样才算抄袭？"

    我们首先将使用工具进行自动化查重，并根据结果与相关同学进行面谈，最终由课程教师给出判定。判定的标准是 **“代码的相似程度是否超出了（不交流具体代码的）正常范围”** 。由于“是否直接发送代码”是我们无法验证的行为，用这个标准处理是不现实的。对于“大范围交流某次作业的过多实现细节”或者“口述每一行、函数的每一个参数用法和形式”这样的情况，客观后果和“直接发送代码”并无区别。

!!! question "这是希望同学们完全独立完成作业，不能交流吗？"

    我们依然持续鼓励同学间的交流和帮助，但直接发送代码（无论是否完整、是文本或截图）、直接帮助同学编写代码、以过细的粒度指导同学（如口述每一行、函数的每一个参数用法和形式，这样的行为极其容易导致大片重复）都是不可取的。希望同学们明白，由于代码作业的特殊性（没有明确的“正确答案”、实现统一效果的方式多样），我们希望同学们从课程中得到尽可能多的收获，鼓励探索和创新。因而以“完成作业”或者“帮助别的同学完成作业”为目的，直接交流具体实现会限制同学的思路，是不可取的。

!!! question "课上说没有“直接向同学发送代码拷贝”的行为就没问题啊？"

    课上描述的规则是“不能直接发送代码”，我们实际执行的标准是“代码的相似程度是否超出了（不交流具体代码的）正常范围”。由于“是否发送代码”是我们无法验证的行为，用这个标准处理是不现实的。对于“大范围交流某次作业的过多实现细节”或者“口述每一行、函数的每一个参数用法和形式”这样的情况，客观后果和“直接发送代码”并无区别。

!!! question "虽然确实和同学交流了代码，但我真的付出了很大努力才完成作业"

    本课程内容较多，基础较弱的同学确实需要付出更多努力。教学团队尽可能地提供了答疑和支持。如果你确实无法在规定时间内通过自己的努力独立完成作业，请联系教学团队寻求更多帮助和建议。

!!! question "我完全独立地完成了作业，只是因为好心教了其他同学导致出现了代码雷同"

    非常感谢你为助教分担答疑任务，但我们不鼓励直接对代码形式进行教学。尤其考虑到具体实现会限制其他同学的思路，并不对同学培养解决问题的能力具有显著的作用。希望你下次可以把相应的文档等发送给他，并且解释的时候尽量屏蔽自己具体实现细节。这对答疑的同学提出了更高的要求，但我们也相信这对双方都是更难但更有收获的方式。

!!! question "使用 GitHub Copilot 等辅助工具导致的代码雷同是否算抄袭？"

    是的，教学团队在客观上无法辨别自动生成相同的代码与直接发送代码的区别。因此请谨慎使用。如果使用，一定要在 honor code 中注明。

## Honor Code

同学在实现过程中，如果参考了网上的代码，或者和其他同学（包括助教和没有选课的同学）交流，请把相关的网址、同学姓名和交流内容写到 `HONOR-CODE.md` 文件并提交到仓库中。

如：

- 为了实现 XX 功能，我阅读了网页 <https://github.com>，理解了上面的代码，然后重新用我自己的方式实现了一遍。
- 在实现 XX 功能的时候，我 YY 地方没有想清楚如何实现，询问了 ZZ 同学。
- 在题目 XX 里，我和同学 YY 遇到了一些困难，一起讨论以后，最终一致决定要用 ZZ 方法实现。

我们将会结合 Honor Code 的内容来判断代码重复是否属于抄袭的范畴。

但是，下面的行为，即使写了 Honor Code，也 **很可能被视为代码抄袭**：

- 为了实现 XX 功能，我发现了网站上有功能一模一样的代码，于是我复制到本地，过了黑盒测试，就原样直接提交了。
- 在实现 XX 功能的时候，我调试了很久也没有调试出来，于是找同学 YY 要了一份代码，看了半天还是不知道代码问题在哪，就把同学 YY 的代码提交了。
- 我写代码的时候，用了 GitHub Copilot 等辅助工具自动生成代码，结果另一个同学也用了，生成了一样的代码。
